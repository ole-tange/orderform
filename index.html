<!DOCTYPE html>

<html>
<head>
  <!-- Order form Version 1.1 -->

  <title>Order form</title>
<!-- Locally cached: http://code.jquery.com/jquery-1.8.2.js -->
  <script src="js/jquery-1.8.2.js" type="text/javascript">
</script>
<!-- Locally cached: http://js-tables.googlecode.com/svn/trunk/jquery.csv.min.js -->
  <script src="js/jquery.csv.min.js" type="text/javascript">
</script>
  <script src="js/jquery/jquery.csv.js" type="text/javascript">
</script>
  <script src="js/var.js" type="text/javascript">
</script>
  <script src="js/validate.js" type="text/javascript">
</script>
  <script src="js/util.js" type="text/javascript">
</script>
  <script src="js/table.js" type="text/javascript">
</script>
  <script src="js/loadOrder.js" type="text/javascript">
</script>


<!-- Locally cached: http://code.jquery.com/ui/1.9.0/jquery-ui.js -->
  <script src="js/jquery-ui.js" type="text/javascript">
</script>
<!-- Locally cached http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/themes/redmond/jquery-ui.css -->
  <link rel="stylesheet" type="text/css" media="screen" href=
  "css/jquery-ui.css">

  <style type="text/css">

  #ui-datepicker-div { display: none; }
  .ui-autocomplete { width: 145px }
  .ui-autocomplete { list-style: none;}

  </style>
</head>

<body bgcolor="" id="body">
  <h1>Order form</h1>

  <table id="t0" height="50" width="40%" style=
  "border: 3px solid black;">
    <tr>
      <td><input type="text" style="border: 3px solid red;"
      maxlength="0" width="1%"> - Error in box - see wiki for more
      information</td>
    </tr>
  </table>

  <form name="seqForm" id="seqForm" action="php/orderform.php"
  onsubmit="return validateForm()" method="post">
    <table border="0" cellspacing="0">
      <tr>
        <td>
          <h4><a id="date">Sample hand-in date:</a></h4>
        </td>

        <td><input type="text" name="date" id="datepicker"></td>

        <td width="200"></td>

        <td colspan="3" rowspan="7">
          <table border="0" cellspacing="0" id="billto-table">
            <tr>
              <td>
                <h4><a id="BillToLink">Bill to</a><span style=
                "color:red">*</span></h4>
              </td>

              <td><input type="text" id="BillTo_name" name="BillTo_name"></td>
            </tr>

            <tr>
              <td height="15"></td>
            </tr>

            <tr>
              <td colspan="2">
                <table id="EAN-table" rowspan="0">
                  <tr>
                    <td>EAN no.</td>

                    <td><input type="text" name="EAN_name" id=
                    "EAN_No_id" class="EAN"></td>
                  </tr>

                  <tr>
                    <td>Faculty</td>

                    <td><input type="text" name="EAN_Fakultet" id=
                    "EAN_Fakultet_id" class="EAN"></td>
                  </tr>

                  <tr>
                    <td>Institute</td>

                    <td><input type="text" name="EAN_Institut" id=
                    "EAN_Institut_id" class="EAN"></td>
                  </tr>

                  <tr>
                    <td>Department</td>

                    <td><input type="text" name="EAN_Afdeling" id=
                    "EAN_Afdeling_id" class="EAN"></td>
                  </tr>
                </table>
              </td>
            </tr>

            <tr>
              <td></td>

              <td height="35">Or</td>
            </tr>

            <tr>
              <td colspan="2">
                <table id="CVR-table" rowspan="0">
                  <tr>
                    <td>CVR no.</td>

                    <td><input type="text" name="CVR_no" id=
                    "CVR_no_id" class="CVR"></td>
                  </tr>

                  <tr>
                    <td>Address1</td>

                    <td><input type="text" name="CVR_adr1" id=
                    "CVR_adr1_id" class="CVR"></td>
                  </tr>
		  
		  <tr>
			<td>Address2</td>
			
			<td><input type="text" name="CVR_adr2" id=
                    "CVR_adr2_id" class="CVR"></td>
                  </tr>
                </table>
              </td>
            </tr>
          </table>
        </td>
      </tr>

      <tr>
        <td>
          <h4><a id="LPLink">Lab person</a></h4>
        </td>

        <td></td>

        <td width="200"></td>
      </tr>

      <tr>
        <td>
          <p>Name:<span style="color:red">*</span></p>
        </td>

        <td><input type="text" onChange="verifyChar(this)" id="LP-name" name=
        "LP-name" size="50"></td>

        <td></td>
      </tr>

      <tr>
        <td>E-mail:<span style="color:red">*</span></td>

        <td><input type="text" name="LP-mail" size="50"></td>

        <td></td>
      </tr>

      <tr>
        <td>Emergency phone:<span style="color:red">*</span></td>

        <td><input type="text" name="LP-phone" size="50"></td>

        <td></td>
      </tr>

      <tr>
        <td>
          <h4><a id="BPLink">Bioinformatics person</a></h4>
        </td>

        <td></td>

        <td width="200"></td>
      </tr>

      <tr>
        <td>Name:<span style="color:red">*</span></td>

        <td><input type="text" name="BP-name" size="50"></td>

        <td></td>
      </tr>

      <tr>
        <td>E-mail:<span style="color:red">*</span></td>

        <td><input type="text" name="BP-mail" size="50"></td>

        <td></td>
      </tr>

      <tr>
        <td>Phone:</td>

        <td><input type="text" name="BP-phone" size="50"></td>
      </tr>

      <tr>
        <td>
          <h4><a id="PILink">Principal Investigator</a><span style=
          "color:red">*</span></h4>
        </td>

        <td><select id="PI" name="PI" onchange="PIInsert(this)" onkeyup="PIInsert(this)">
          <option value="person" selected=
          "selected">
            Select person
          </option>

          <option value="Anders Krogh">
            Anders Krogh
          </option>

          <option value="Anders Lund">
            Anders Lund
          </option>

          <option value="Albin Sandelin">
            Albin Sandelin
          </option>

          <option value="Bo Porse">
            Bo Porse
          </option>

          <option value="Claus Soerensen">
            Claus Soerensen
          </option>

          <option value="Eske Willerslev">
            Eske Willerslev
          </option>

          <option value="Jeppe Vinther">
            Jeppe Vinther
          </option>

          <option value="Kristian Helin">
            Kristian Helin
          </option>

          <option value="Kurt Kjaer">
            Kurt Kjaer
          </option>

          <option value="Klaus Hansen">
            Klaus Hansen
          </option>

          <option value="Ludovic Orlando">
            Ludovic Orlando
          </option>

          <option value="Morten Froedin">
            Morten Froedin
          </option>

          <option value="Soeren Soerensen">
            Soeren Soerensen
          </option>

          <option value="Tom Gilbert">
            Tom Gilbert
          </option>

          <option value="other">
            Other Principal Investigator
          </option>
        </select></td>

        <td><input id="BricButton" type="button" onclick=
        "expandAllTables()" value=" Bric table "></td>
      </tr>

      <tr class="PI-field">
        <td>Name:<span style="color:red">*</span></td>

        <td><input type="text" id="PI-name" name="PI-name" size="50"></td>

        <td></td>
      </tr>

      <tr class="PI-field">
        <td>E-mail:<span style="color:red">*</span></td>

        <td><input type="text" id="PI-email" name="PI-email" size="50"></td>

        <td></td>
      </tr>

      <tr>
        <td colspan="5">
          <h4><a id="addInfoLink">Additional information for
          sequencing center</a></h4>
        </td>
      </tr>

      <tr>
        <td colspan="7">
        <textarea rows="4" cols="80" name="Addinfo" onChange="verifyChar4AddInfo(this)" id="Addinfo">
</textarea></td>
      </tr>

      <tr>
        <td colspan="5">
          <h4><a id="runtypeLink">Mark one of the following, with a
          number between 1-32, make separate order notes for
          different run types</a></h4>
        </td>
      </tr>

      <tr>
        <td>Run-type<span style="color:red">*</span></td>

        <td>Single-Read lanes</td>

        <td>Paired-End lanes</td>
      </tr>

      <tr>
        <td>50</td>

        <td><input type="text" name="runtype_0" id="runtype0"
        class="runtype" onblur=
        "validateRuntypeOnTheFly(this)"></td>

        <td><input type="text" onblur=
        "validateRuntypeOnTheFly(this)" name="runtype_1" id=
        "runtype1" class="runtype"></td>
      </tr>

      <tr>
        <td>75</td>

        <td></td>

        <td><input type="text" onblur=
        "validateRuntypeOnTheFly(this)" name="runtype_2" id=
        "runtype2" class="runtype"></td>
      </tr>

      <tr>
        <td>100</td>

        <td><input type="text" onblur=
        "validateRuntypeOnTheFly(this)" name="runtype_3" id=
        "runtype3" class="runtype"></td>

        <td><input type="text" onblur=
        "validateRuntypeOnTheFly(this)" name="runtype_4" id=
        "runtype4" class="runtype"></td>
      </tr>

      <tr>
        <td colspan="2">
          <h4><a id="phixLink">Is addition of phiX required? (low
          complexity sample)</a></h4>
        </td>

        <td colspan="2">
          <h4><a id="seqLibLink">Are the sequencing libraries
          already built?</a></h4>
        </td>
      </tr>

      <tr>
        <td colspan="2"><input type="radio" name="phiX" value=
        "yes" id="phixYes"> Yes <input type="radio" name="phiX" value="no"
        checked id="phixNo"> No</td>

        <td><input type="radio" name="seqLib" value="yes"  id="seqLibYes"> Yes
        <input type="radio" name="seqLib"  id="seqLibNo" value="no" checked>
        No</td>
      </tr>

      <tr>
        <td colspan="2">
          <h4><a id="leftoversLink">Do you want to pick up leftover
          sample? (if any)</a></h4>
        </td>

        <td colspan="2">
          <h4><a id="custSeqLink">Is usage of custom sequencing
          primer required?</a></h4>
        </td>
      </tr>

      <tr>
        <td colspan="2"><input type="radio" name="leftovers" value=
        "yes" id="leftoversYes"> Yes <input type="radio" id="leftoversNo" name="leftovers" value="no"
        checked> No</td>

        <td><input type="radio" name="seqPrim" id="seqPrimYes" value="yes"> Yes
        <input type="radio" name="seqPrim" id="seqPrimNo" value="no" checked>
        No</td>

        <td></td>

        <td></td>

        <td></td>

        <td></td>

        <td></td>

        <td width="22%"></td><!--
<td><input id="BricButton" type="button" onclick="expandTable()" value="   Bric   "></td>
-->
      </tr>

      <tr>
        <td colspan="2">
          <h4><a id="concentrationUnitLink">Are concentrations in nM or ng/ul?</a></h4>
        </td>

        <td colspan="2">
        </td>
	<td>
		<input id="BricButton1" type="button" onclick=
        "expandAllTables()" value=" Bric table ">
	</td>
      </tr>

      <tr>
        <td colspan="2"><input type="radio" id="unit-nM" name="concentration_unit" value=
        "nM"> nM <input type="radio" id="unit-ng" name="concentration_unit" value="ng/ul"
        > ng/ul</td>

        <td></td>
      </tr>

    </table><br>

    <table id="t" border="0"></table><br>
    <input type="hidden" name="PIShort" id="PIShort">

    <table border="0">
      <tr>
        <td><input type="button" onclick="append10Rows()" value=
        "Add 10 lines"></td>

        <td><input type="button" onclick="addNewTable()" value=
        "Add new Tube"></td>
      </tr>

      <tr>
	<td colspan=3><input type="checkbox" name="iaccept" id="iaccept">I accept <a href="/sla" target="_blank">the Service Level Agreement</a></td>
      </tr>
      <tr>
        <td><input type="submit" value="Pre-submit the order form"></td>

        <td></td>
      </tr>
    </table>
    
      <h4 class="admin">Admin field</h4>
	<textarea rows="5" cols="80" name="adminInfo" id="adminText" class="admin"></textarea>
	  <input type="hidden" id="adminStatus" name="adminStatus" value="0"/>
	
</form>
  
  <a id="results"></a>
  
  <script type="text/javascript">

  $(document).ready(function(){
        // Add wiki links for headlines
        addLinks();

        // Hide boxes at startup
        $('#t0').hide();	// The error box
        $('.PI-field').hide();	// PI-other fields
        $('.admin').hide();	// admin box

        //Add datepicker
        $("#datepicker").datepicker('setDate', "now");
        $('#datepicker').datepicker({
                        appendText: " (yyyy-mm-dd)",
                        dateFormat: "yy-mm-dd"          
                });

	// get GET variable(s) in url
	var gets = window.location.search.substring(1);
	var arrayGets = gets.split("&")
	var loadvar = "";
	var adminvar = 0;
	
	for(var i = 0; i < arrayGets.length;i++){
		var data = arrayGets[i].split("=");
		if(data[0] == "load"){
			loadvar = data[1];
		} else if(data[0] == "admin"){
			adminvar = data[1];
		}
	}
	
	// show "admin" filed if specified
	if(adminvar){
		$('.admin').show();
		$('#adminStatus').val(adminvar);
	}
	
	// check if it is a "load" or a new order
	//try{	
		if(loadvar){
			loadOrder(loadvar);
		} else{
			addNewTable(); // create table header and add a row // first tubetag
		}
	//} catch (error){
	//	alert(error);
	//}
		
        // Add "frame" for EAN and cvr
        $("#EAN-table").css("border","1px solid black");
        $("#CVR-table").css("border","1px solid black");
	
	// Fixing mouseevent bug for some browsers
	$("#PI").mouseout(function(){
		PIInsert(this);
	});
        
	// focus on first box
        $('input[name=LP-name]').focus();
	
  });
  </script>
</body>
</html>
